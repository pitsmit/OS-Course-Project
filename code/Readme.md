usb_stor_Bulk_transport -- код этой функции доказывает что команды передаются через transfer_buffer, а всё остальное через листы(вроде)))))))
usb_hcd_map_urb_for_dma -- в этой функции заполняется dma
usb_sg_init --- шикарная функция с ответами на HIGHMEM и sg -- это прям находка!!!
xhci_gen_setup -- тут происходит инициализация sg_tablesize бесконечностью, то есть возможность обработки
списков произвольных размеров. sg_tablesize используется в usb_sg_init как флаг использования sg-листов. этот флаг нужен для корректного
заполнения полей трансфера
get_protocol -- тут про выбор SCSI -- возможно код можно сделать универсальным, а может и нет...
get_transport -- тут выбор BULK